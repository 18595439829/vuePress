(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{383:function(a,t,s){"use strict";s.r(t);var e=s(44),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"nginx部署vue项目后-配置反向代理-但项目访问接口失败"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx部署vue项目后-配置反向代理-但项目访问接口失败"}},[a._v("#")]),a._v(" nginx部署vue项目后,配置反向代理,但项目访问接口失败")]),a._v(" "),s("blockquote",[s("p",[a._v('使用proxy_pass配置反向代理,在匹配到location配置的URL路径后，转发请求到proxy_pass配置额URL，是否会附加location配置路径与proxy_pass配置的路径后是否有"/"有关，有"/"则不附加')])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("location   /test/  {\n        proxy_pass    http://127.0.0.1:8080/;\n}\n")])])]),s("p",[a._v("请求/test/1.jpg，将会被nginx转发请求到http://127.0.0.1:8080/1.jpg（未附加/test/路径）。")]),a._v(" "),s("h3",{attrs:{id:"第一种"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一种"}},[a._v("#")]),a._v(" 第一种")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("We're sorry but xxx doesn't work properly without JavaScript enabled. \n")])])]),s("p",[a._v("出现这种错误一般是反向代理配置错误,检查项目代码配置文件和接口地址反向代理是否正确,检查nginx反向代理是否配置正确")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("location /api {\n            // 如果接口访问一直为404,但服务并没有问题,考虑重写api/路径之前的所有字符串为代理地址\n            rewrite  ^.+api/?(.*)$ /$1 break;\n            proxy_pass http://localhost:9901/;\n }\n")])])]),s("h3",{attrs:{id:"第二种-接口访问404"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二种-接口访问404"}},[a._v("#")]),a._v(" 第二种 接口访问404")]),a._v(" "),s("h5",{attrs:{id:"第一种写法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一种写法"}},[a._v("#")]),a._v(" 第一种写法")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("// 第一种写法\nlocation ^~/ball/ {\n           try_files $uri $uri/ /ball/index.html;\n}\n\nlocation /api {\n            // 如果接口访问一直为404,但服务并没有问题,考虑重写api/路径之前的所有字符串为代理地址\n            rewrite  ^.+api/?(.*)$ /$1 break;\n            proxy_pass http://localhost:9901/;\n }\n")])])]),s("h5",{attrs:{id:"第二种写法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二种写法"}},[a._v("#")]),a._v(" 第二种写法")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("// 第二种写法\nlocation /app1 {\n    #     浏览器访问地址,指向项目文件夹下的index.html\n    root  html/app1;\n    index  index.html index.htm;\n}\n###  配置反向代理,解决跨域问题 \nlocation /api {\n    proxy_pass http://172.xx.xx.xx:8000;\n}\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);